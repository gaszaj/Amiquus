---
import BaseLayout from '../../layouts/BaseLayout.astro';
import homeData from '../../data/home.json';
import wwwData from '../../data/www.json';
import commonData from '../../data/common.json';
import products from '../../data/product.json';
import localeData from '../../data/locale.json';

// --- Interface Definitions  ---
interface HeroData {
  title: string;
  subtitle: string;
  ctaText: string;
  ctaLink: string;
  features: string[];
  socialProof: {
    text: string;
    rating: number; 
    userPhotos: string[];
  };
  ogImage?: string;
}

interface Product {
  title: string;
  image: string;
  url: string;
}

interface FeatureItem {
  icon: string;
  title: string;
  description: string;
}

interface FaqItem {
  question: string;
  answer: string;
}

interface MarqueeItem {
  url: string;
  image: string;
  alt: string;
}

interface FormAlerts {
  invalidEmail: string;
  termsNotAccepted: string;
  submissionSuccess: string;
  submissionError: string;
}

// Get the locale from the URL path (e.g., 'si' from /si/)
const locale = Astro.url.pathname.split('/')[1];

// Find the matching data objects based on M_SLUG, with fallbacks
const common = commonData.find(item => item.M_SLUG === locale) || commonData[0];
const home = homeData.find(item => item.M_SLUG === locale) || homeData[0];
const product = products.find(item => item.M_SLUG === locale) || products[0];

// If we're using fallback data, make sure it matches our locale
if (common.M_SLUG !== locale || home.M_SLUG !== locale || product.M_SLUG !== locale) {
  return Astro.redirect('/404');
}

const www = wwwData[0];

// Helper function for absolute URLs with locale
const getAbsoluteUrl = (path: string) => {
    return new URL(`/${locale}${path}`, Astro.url.origin).toString();
};

// Helper function for base-level URLs (without locale)
const getBaseUrl = (path: string) => {
    return new URL(path, Astro.url.origin).toString();
};

// Get language data
const languageIso: string = home.M_LANGUAGE_ISO;
const countryCode: string = home.M_COUNTRY_CODE;

// Find matching content orientation from common.json
const contentOrientation: string = common.M_CONTENT_ORIENTATION || 'ltr';

// --- Data for the Homepage ---

// Hero section data
const heroData: HeroData = {
  title: home.HOME_H1,
  subtitle: home.HOME_SUBTITLE,
  ogImage: home.HOME_OG_IMAGE_PATH,
  ctaText: home.HOME_HERO_BUTTON,
  ctaLink: "#best-sellers",
  features: [
    home.PAGE_SOCIAL_SHARING_FEATURE_1,
    home.PAGE_SOCIAL_SHARING_FEATURE_2,
    home.PAGE_SOCIAL_SHARING_FEATURE_3
  ],
  socialProof: {
    text: home.HOME_HERO_SOCIAL_PROOF,
    rating: 5,
    userPhotos: [
      '/socialproof/sp6.webp',
      '/socialproof/sp10.webp',
      '/socialproof/sp13.webp',
      '/socialproof/sp14.webp',
      '/socialproof/sp20.webp'
    ]
  }
};

// Define keywords for the page
const pageKeywords: string = [
  home.M_HOME_NAME,
  home.HOME_KEYWORD_1,
  common.M_COUNTRY_NATIVE,
  www.PAGE_ORGANISATION_FULL_NAME
].join(', ');

// Filter and sort bestsellers based on criteria for specific locale
const bestsellers = products
  .filter(product => 
    product.PUBLISH_Y_N === "1" && 
    product.PRODUCT_IS_BESTSELLER === "1" &&
    product.M_SLUG === locale
  )
  .sort((a, b) => {
    // First sort by importance rank (descending)
    const rankDiff = parseInt(b.PRODUCT_IMPORTANCE_RANK) - parseInt(a.PRODUCT_IMPORTANCE_RANK);
    if (rankDiff !== 0) return rankDiff;
    // If ranks are equal, randomize
    return Math.random() - 0.5;
  });

// Get top 5 products for marquee
const marqueeItems = bestsellers
  .slice(0, 5)
  .map(product => ({
    url: getBaseUrl(`/${product.M_SLUG}/${product.PRODUCT_CATEGORY_1_SLUG}/${product.PRODUCT_ASCII_SLUG}`),
    image: getBaseUrl(product.PRODUCT_IMAGE_PATH_S),
    alt: `${product.PRODUCT_CATEGORY_1} â€” ${product.PRODUCT_NAME} | ${www.PAGE_ORGANISATION_FULL_NAME}`
  }));

// Get top 9 products for bestsellers section
const bestsellersSection = {
  title: home.HOME_H2_1,
  productCtaText: home.HOME_HERO_BUTTON,
  products: bestsellers
    .slice(0, 9)
    .map(product => ({
      title: `${product.PRODUCT_CATEGORY_1} â€” ${product.PRODUCT_NAME}`,
      image: getBaseUrl(product.PRODUCT_IMAGE_PATH_S),
      alt: `${product.PRODUCT_CATEGORY_1} â€” ${product.PRODUCT_NAME} | ${www.PAGE_ORGANISATION_FULL_NAME}`,
      url: getBaseUrl(`/${product.M_SLUG}/${product.PRODUCT_CATEGORY_1_SLUG}/${product.PRODUCT_ASCII_SLUG}`)
    }))
};

// Features section data
const featuresSection = {
  title: home.HOME_H2_2,
  items: [
    {
      icon: "âš¡",
      title: home.HOME_STRING_14,
      description: home.HOME_STRING_17
    },
    {
      icon: "ðŸ”„",
      title: home.HOME_STRING_15,
      description: home.HOME_STRING_18
    },
    {
      icon: "ðŸ“¦",
      title: home.HOME_STRING_16,
      description: home.HOME_STRING_19
    }
  ] as FeatureItem[] 
};

// Institutions section data
const institutionsSection = {
  title: home.HOME_H2_4,
  items: [
    home.INSTITUTION_1,
    home.INSTITUTION_2,
    home.INSTITUTION_3,
    home.INSTITUTION_4,
    home.INSTITUTION_5,
    home.INSTITUTION_6
  ]
};

// FAQ section data
const faqSection = {
  title: home.HOME_H2_5,
  subtitle: home.HOME_FAQ_TEXT,
  items: [
    { question: home.HOME_Q1, answer: home.HOME_A1 },
    { question: home.HOME_Q2, answer: home.HOME_A2 },
    { question: home.HOME_Q3, answer: home.HOME_A3 },
    { question: home.HOME_Q4, answer: home.HOME_A4 },
    { question: home.HOME_Q5, answer: home.HOME_A5 },
    { question: home.HOME_Q6, answer: home.HOME_A6 },
    { question: home.HOME_Q7, answer: home.HOME_A7 },
    { question: home.HOME_Q8, answer: home.HOME_A8 },
    { question: home.HOME_Q9, answer: home.HOME_A9 },
    { question: home.HOME_Q10, answer: home.HOME_A10 },
    { question: home.HOME_Q11, answer: home.HOME_A11 },
    { question: home.HOME_Q12, answer: home.HOME_A12 },
    { question: home.HOME_Q13, answer: home.HOME_A13 },
    { question: home.HOME_Q14, answer: home.HOME_A14 },
    { question: home.HOME_Q15, answer: home.HOME_A15 }
  ] as FaqItem[] // Type assertion
};

// Contact section data
const contactSection = { // Type assertion can be added
  title: home.HOME_H2_6,
  subtitle: home.HOME_CONTACT_SUBTITLE,
  formLabels: {
    fullName: common.M_FULL_NAME,
    fullNamePlaceholder: common.M_FULLNAME_PLACEHOLDER,
    email: common.M_EMAIL,
    emailPlaceholder: common.M_EMAIL_PLACEHOLDER,
    message: common.M_MESSAGE_LABEL,
    messagePlaceholder: common.M_PARTNERSHIP_MESSAGE_PLACEHOLDER,
    terms: common.M_TERMS_REQUIRED,
    submitButton: common.M_SEND_BUTTON
  }
};

// Form alert messages for client-side script
const formAlertMessages: FormAlerts = { // Type assertion
  invalidEmail: common.M_EMAIL_INVALID,
  termsNotAccepted: common.M_TERMS_REQUIRED,
  submissionSuccess: common.M_CONFIRMATION_TEXT,
  submissionError: common.M_FORM_ERROR
};

// --- Schema Definition ---
// WebPage and Article Schema
const webpageSchema = {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": home.HOME_H1,
  "url": Astro.url.href,
  "description": home.HOME_META_SEO,
  "inLanguage": `${home.M_LANGUAGE_ISO}-${home.M_COUNTRY_CODE}`,
  "breadcrumb": {
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": home.M_HOME_NAME,
        "item": Astro.url.href
      }
    ]
  },
  "mainEntity": {
    "@type": "Article",
    "headline": home.HOME_H1,
    "description": home.HOME_META_SEO,
    "image": getBaseUrl(home.HOME_OG_IMAGE_PATH),
    "author": {
      "@type": "Organization",
      "name": www.PAGE_ORGANISATION_FULL_NAME
    },
    "datePublished": `${home.HOME_DATE_PUBLISHED}T${home.HOME_HOUR_PUBLISHED}+02:00`,
    "dateModified": `${home.HOME_DATE_UPDATED}T${home.HOME_HOUR_UPDATED}+02:00`,
    "inLanguage": `${home.M_LANGUAGE_ISO}-${home.M_COUNTRY_CODE}`
  }
};

// FAQ Schema
const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": faqSection.items.map(item => ({
    "@type": "Question",
    "name": item.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": item.answer
    }
  }))
};

// Organization Schema 
const organizationSchema = {
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": www.PAGE_ORGANISATION_FULL_NAME,
  "url": getBaseUrl('/'),
  "foundingDate": www.PAGE_FOUNDING_DATE,
  "logo": getBaseUrl(www.PAGE_LOGO_IMAGE_PATH_1),
  "keywords": [
    www.PAGE_ORGANISATION_FULL_NAME,
    common.M_COUNTRY_NATIVE,
    common.PAGE_KEYWORD_1,
    common.PAGE_KEYWORD_2,
    common.PAGE_KEYWORD_3,
    common.PAGE_KEYWORD_4,
    common.PAGE_KEYWORD_5,
    common.PAGE_KEYWORD_6
  ].filter(Boolean),
  "description": common.PAGE_DESCRIPTION,
  "numberOfEmployees": {
    "@type": "QuantitativeValue",
    "minValue": "1",
    "maxValue": "9"
  },
  "slogan": common.PAGE_SLOGAN,
  "contactPoint": {
    "@type": "ContactPoint",
    "email": www.PAGE_INFO_EMAIL,
    "contactType": common.M_CUSTOMER_SUPPORT
  },
  "sameAs": [
    www.PAGE_INSTAGRAM_URL,
    www.PAGE_FACEBOOK_URL,
    www.PAGE_TWITTER_URL,
    www.PAGE_LINKEDIN_URL,
    www.PAGE_YOUTUBE_URL,
    www.PAGE_PINTEREST_URL,
    www.PAGE_BLUESKY_URL
  ].filter(Boolean),
  "areaServed": {
    "@type": "Country",
    "name": common.M_COUNTRY,
    "identifier": common.M_COUNTRY_CODE
  },
  "potentialAction": [
    {
      "@type": "ViewAction",
      "name": `XML Sitemap for ${www.PAGE_ORGANISATION_FULL_NAME}`,
      "target": getBaseUrl('/sitemap.xml')
    },
    {
      "@type": "ViewAction",
      "name": `Localized XML Sitemap (${languageIso}-${countryCode}) for ${www.PAGE_ORGANISATION_FULL_NAME}`,
      "target": getBaseUrl(`/sitemap-${languageIso}-${countryCode}.xml`)
    },
    {
      "@type": "ViewAction",
      "name": `LLM Guidance for ${www.PAGE_ORGANISATION_FULL_NAME}`,
      "target": getBaseUrl('/llms.txt'),
      "description": `A text resource outlining key information about ${www.PAGE_ORGANISATION_FULL_NAME} offerings, company, products, services, and more for AI agents and AI crawlers.`
    }
  ],
  "mainEntityOfPage": [
    {
      "@type": "WebPage",
      "@id": getBaseUrl('/sitemap.xml'),
      "name": `XML Sitemap for ${www.PAGE_ORGANISATION_FULL_NAME}`,
      "description": `Provides a structured list of pages available on ${www.PAGE_ORGANISATION_FULL_NAME} for crawlers and AI agents.`
    },
    {
      "@type": "WebPage",
      "@id": getBaseUrl(`/sitemap-${languageIso}-${countryCode}.xml`),
      "name": `Localized XML Sitemap (${languageIso}-${countryCode}) for ${www.PAGE_ORGANISATION_FULL_NAME}`,
      "description": `Provides a full and structured list of localized pages for ${languageIso} (${languageIso}-${countryCode}) locale on ${www.PAGE_ORGANISATION_FULL_NAME} for crawlers and AI agents.`
    },
    {
      "@type": "WebPage",
      "@id": getBaseUrl('/llms.txt'),
      "name": `LLM Guidance for ${www.PAGE_ORGANISATION_FULL_NAME}`,
      "description": `A text resource outlining key information about ${www.PAGE_ORGANISATION_FULL_NAME} offerings, company, products, services, and more for AI agents and AI crawlers.`
    }
  ]
};

// Combine all schemas
const schema: object[] | null = [webpageSchema, faqSchema, organizationSchema];

// --- Props for BaseLayout (to be used directly in the template below) ---
const pageTitle: string = home.HOME_H1;
const pageDescription: string | undefined = home.HOME_META_SEO;
const pageOgImage: string | undefined = home.HOME_OG_IMAGE_PATH;

// Build the language link map for the language picker
const languageLinksMap = {};
for (const locale of localeData.filter(l => l.M_LOCALE_PUBLISH_Y_N === "1")) {
  // For homepage, we just use the locale slug as the URL
  languageLinksMap[locale.M_SLUG] = `/${locale.M_SLUG}`;
}

---

<BaseLayout 
  languageIso={languageIso} 
  countryCode={countryCode} 
  contentOrientation={contentOrientation} 
  title={pageTitle} 
  description={pageDescription} 
  ogImage={pageOgImage} 
  keywords={pageKeywords} 
  schema={schema}
  languageLinksMap={languageLinksMap}
>
  <!-- Hero Section -->
  <section class="bg-black text-white py-12">
    <div class="container mx-auto px-4">
      <div class="max-w-3xl">
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold leading-tight mb-4">
          {heroData.title}
        </h1>
        <p class="text-xl md:text-2xl text-gray-300 mb-6 leading-relaxed">
          {heroData.subtitle}
        </p>
        
        <ul class="space-y-2 mb-6">
          {heroData.features.map(feature => (
            <li class="flex items-center gap-2">
              <span class="text-signal-green">âœ“</span>
              <span class="text-lg">{feature}</span>
            </li>
          ))}
        </ul>
        
        <div class="flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4 mb-8">
          <div class="flex -space-x-3 mb-2 sm:mb-0">
            {heroData.socialProof.userPhotos.map(photo => (
              <img 
                src={photo} 
                alt="User" 
                class="w-10 h-10 rounded-full border-2 border-black"
                width="50"
                height="50"
                loading="lazy"
                decoding="async"
              />
            ))}
          </div>
          <p class="text-lg text-signal-green">{heroData.socialProof.text}</p>
        </div>
        
        <a 
          href={heroData.ctaLink} 
          class="inline-block bg-signal-green text-black font-semibold px-8 py-3 hover:bg-[#a5d429] transition-colors"
        >
          {heroData.ctaText}
        </a>
      </div>
    </div>

    <!-- Marquee Section -->
    <div class="overflow-x-hidden width-100 relative mt-12">
      <div class="pseo-marquee-container">
        <div class="pseo-marquee">
          <div class="pseo-marquee__group">
            {[...Array(2)].map(() => (
              <div class="flex gap-4">
                {marqueeItems.map(item => (
                  <a href={item.url}>
                    <img 
                      src={item.image} 
                      alt={item.alt} 
                      width="50" 
                      height="50" 
                      loading="lazy"
                      decoding="async"
                    />
                  </a>
                ))}
              </div>
            ))}
          </div>
          <div aria-hidden="true" class="pseo-marquee__group">
            {[...Array(2)].map(() => (
              <div class="flex gap-4">
                {marqueeItems.map(item => (
                  <a href={item.url}>
                    <img 
                      src={item.image} 
                      alt={item.alt}
                      width="50" 
                      height="50" 
                      loading="lazy"
                      decoding="async"
                    />
                  </a>
                ))}
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Bestsellers Section -->
  <section id="best-sellers" class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-black mb-12 text-center">{bestsellersSection.title}</h2>
      <div class="grid grid-cols-2 lg:grid-cols-3 gap-2">
        {bestsellersSection.products.map(product => (
          <div class="bg-white border border-gray-100 overflow-hidden group">
            <a href={product.url} class="block">
              <img 
                src={product.image} 
                alt={product.alt}
                class="w-full h-56 object-contain p-4"
                width="225"
                height="225"
                loading="lazy"
                decoding="async"
              />
              <div class="p-4 border-t border-gray-100">
                <h3 class="font-medium text-black group-hover:text-signal-green transition-colors mb-4">
                  {product.title}
                </h3>
                <span class="block w-full bg-black text-signal-green border border-signal-green py-2 px-4 hover:bg-signal-green hover:text-black transition-all text-center">
                  {bestsellersSection.productCtaText}
                </span>
              </div>
            </a>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-black mb-12 text-center">{featuresSection.title}</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {featuresSection.items.map(feature => (
          <div class="text-center p-6 bg-white rounded-lg shadow-sm">
            <div class="text-4xl mb-4">{feature.icon}</div>
            <h3 class="text-xl font-semibold mb-2">{feature.title}</h3>
            <p class="text-gray-600">{feature.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Institutions Section -->
  <section class="py-16 bg-black">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-white mb-12 text-center">
        {institutionsSection.title}
      </h2>
      <div class="flex flex-wrap justify-center items-center gap-12">
        {institutionsSection.items.map(institution => (
          <div class="text-xl font-medium text-signal-green">
            {institution}
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-black mb-4 text-center">{faqSection.title}</h2>
      <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto">{faqSection.subtitle}</p>
      <div class="max-w-3xl mx-auto space-y-4">
        {faqSection.items.map(item => (
          <details class="bg-gray-50 rounded-lg group">
            <summary class="p-4 cursor-pointer font-medium flex items-center justify-between">
              <span>{item.question}</span>
              <svg 
                class="w-5 h-5 transform transition-transform group-open:rotate-180" 
                fill="none" 
                stroke="currentColor" 
                viewBox="0 0 24 24"
              >
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
              </svg>
            </summary>
            <div class="p-4 pt-0 text-gray-600">
              {item.answer}
            </div>
          </details>
        ))}
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-black mb-4 text-center">{contactSection.title}</h2>
      <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto">
        {contactSection.subtitle}
      </p>

      <div class="max-w-2xl mx-auto">
        <form class="space-y-6">
          <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">{contactSection.formLabels.fullName}</label>
            <input 
              type="text" 
              placeholder={contactSection.formLabels.fullNamePlaceholder}
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:border-signal-green focus:ring-1 focus:ring-signal-green" 
              required
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">{contactSection.formLabels.email}</label>
            <input 
              type="email" 
              placeholder={contactSection.formLabels.emailPlaceholder}
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:border-signal-green focus:ring-1 focus:ring-signal-green" 
              required
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">{contactSection.formLabels.message}</label>
            <textarea 
              rows="4" 
              placeholder={contactSection.formLabels.messagePlaceholder}
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:border-signal-green focus:ring-1 focus:ring-signal-green"
              required
            ></textarea>
          </div>
          <div class="flex items-center gap-2">
            <input type="checkbox" id="terms" required />
            <label for="terms" class="text-sm text-gray-600">
              {contactSection.formLabels.terms}
            </label>
          </div>
          <button 
            type="submit" 
            class="w-full bg-black text-signal-green border border-signal-green py-3 rounded-lg hover:bg-signal-green hover:text-black transition-all"
          >
            {contactSection.formLabels.submitButton}
          </button>
        </form>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
.pseo-marquee-container {
  --space: clamp(1rem, 2vw, 2rem);
  --gap: var(--space);
  --duration: 25s;
  position: relative;
  width: 100%;
  max-width: 100vw;
  overflow-x: hidden;
  padding: 20px 0;
  box-sizing: border-box;
}

.pseo-marquee {
  display: flex;
  overflow: hidden;
  user-select: none;
  gap: var(--gap);
  width: 100%;
  margin: 0;
  padding: 0;
  mask-image: linear-gradient(
    to right,
    hsl(0 0% 0% / 0),
    hsl(0 0% 0% / 1) 10%,
    hsl(0 0% 0% / 1) 90%,
    hsl(0 0% 0% / 0)
  );
  -webkit-mask-image: linear-gradient(
    to right,
    hsl(0 0% 0% / 0),
    hsl(0 0% 0% / 1) 10%,
    hsl(0 0% 0% / 1) 90%,
    hsl(0 0% 0% / 0)
  );
}

.pseo-marquee-container:hover .pseo-marquee__group {
  animation-play-state: paused;
}

.pseo-marquee__group {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: space-around;
  gap: var(--gap);
  min-width: 100%;
  animation: pseo-scroll var(--duration) linear infinite;
  will-change: transform;
  animation-play-state: running;
}

.pseo-marquee__group img {
  max-width: clamp(8rem, 20vw, 20rem);
  aspect-ratio: 1;
  object-fit: cover;
  border-radius: 1rem;
  width: 100%;
  height: auto;
  flex-shrink: 0;
}

@keyframes pseo-scroll {
  0%{
    transform: translateX(0);
  }
  100% {
    transform: translateX(calc(-100% - var(--gap)));
  }
}

@media (prefers-reduced-motion: reduce) {
  .pseo-marquee__group {
    animation-play-state: paused;
  }
}

details > summary {
  list-style: none;
}
details > summary::-webkit-details-marker {
  display: none;
}
</style>

<script define:vars={{ alerts: formAlertMessages }}>
document.addEventListener('DOMContentLoaded', () => {
  const form = document.querySelector('section.py-16.bg-gray-50 form');
  if (form) {
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      
      const emailInput = form.querySelector('input[type="email"]');
      // Basic check, consider more robust validation
      if (emailInput && (!emailInput.value || !emailInput.value.includes('@'))) { 
        alert(alerts.invalidEmail); 
        return;
      }

      const termsCheckbox = form.querySelector('#terms');
      if (termsCheckbox && !termsCheckbox.checked) {
        alert(alerts.termsNotAccepted);
        return;
      }

      try {
        // Form submission logic here (e.g., send data to a server)
        // For now, we just show the success message
        console.log('Form data would be submitted here.');
        alert(alerts.submissionSuccess);
        form.reset();
      } catch (error) {
        console.error('Form submission error:', error);
        alert(alerts.submissionError);
      }
    });
  }
});
</script>
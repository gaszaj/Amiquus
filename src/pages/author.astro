---
import AuthorLayout from '../layouts/AuthorLayout.astro';
import { SI, GB, DE, HR, RS } from 'country-flag-icons/string/3x2';

// --- Author's Core Data ---
const authorProfileData = {
  name: "Rastko 맒rjanec",
  description: "Rastko 맒rjanec je lastnik in direktor ELSAV Ver쬰j, slovenskega podjetja s 25-letno tradicijo proizvodnje prometnovarnostne opreme. Pod njegovim vodstvom je podjetje uvedlo bistvene izbolj코ave tako v kakovosti izdelkov kot v proizvodnih procesih in doseglo zmogljivost izdelave do 200 prometnih znakov dnevno. Rastko skupaj s sinom Nikom, ki je odra코캜al v poslovnem okolju, ohranja zavezanost podjetja k odli캜nosti ob zagotavljanju EU certifikatov in skladnosti s standardi SIST EN. Ko podjetje prehaja v naslednjo generacijo, se Rastko 코e napre캜a na inovacije na podro캜ju varnostnih znakov, medtem ko se njegov sin pripravlja na nadaljevanje poslanstva podjetja varovanja 쬴vljenj z vrhunskimi opozorilnimi sistemi.",
  image: "/authors/Rastko-맒rjanec.webp",
  socialLinks: {
    linkedin: "https://si.linkedin.com/in/rastko-%C5%A1krjanec-bb8b22176",
    twitter: "https://www.facebook.com/rastko.skrjanec/", // Assuming this is the intended "Twitter/X" link
    website: "https://www.elsaverzej.com/index.php/kontakt.html",
    email: "rastko.skrjanec@elsaverzej.com"
  },
  jobTitle: "CEO & Owner",
  company: "ELSAV Ver쬰j",
  // authorId: "rastko-skrjanec", // This ID is for routing/data fetching, not directly for layout
  // joinDate: "2020-05-15" // Not used by layout currently
};

// --- Data for Layout Sections & UI Text ---
const languagesData = [
  { name: "Slovenian", flag: SI },
  { name: "English", flag: GB },
  { name: "German", flag: DE },
  { name: "Croatian", flag: HR },
  { name: "Serbian", flag: RS }
];

const layoutStringsData = {
  baseLayoutDescriptionPrefix: "avtor in urednik", // Example, adjust as needed
  authorImageAltText: "Avtor in urednik - Rastko 맒rjanec",
  socialLinkLabelLinkedIn: "LinkedIn",
  socialLinkLabelTwitter: "Twitter", // Or "Facebook" if that's what the link points to
  socialLinkLabelWebsite: "Website",
  socialLinkLabelEmail: "Email",
  jobTitleAtCompanySeparator: " at ",
  languagesSectionTitle: "Jeziki",
  languagesSectionIcon: "游깴",
  footerLinkAllAuthorsText: "Ostali avtorji",
  footerLinkAllAuthorsUrl: "/si/avtorji-in-uredniki",
  footerLinkEditorialPolicyText: "Preberite na코o uredni코ko politiko",
  footerLinkEditorialPolicyUrl: "/si/uredniska-politika",
};

// --- Schema Definition ---
const currentDate = new Date();
const formattedDate = currentDate.toISOString().split('T')[0];
const formattedTime = currentDate.toTimeString().split(' ')[0];

// WebPage and Article Schema
const webpageSchema = {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": authorProfileData.name,
  "url": Astro.url.href,
  "description": authorProfileData.description,
  "inLanguage": "sl-SI",
  "breadcrumb": {
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "EUSIGNAL",
        "item": "/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Avtorji in uredniki",
        "item": "/si/avtorji-in-uredniki"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": authorProfileData.name,
        "item": Astro.url.href
      }
    ]
  },
  "mainEntity": {
    "@type": "Article",
    "headline": authorProfileData.name,
    "description": authorProfileData.description,
    "image": authorProfileData.image,
    "author": {
      "@type": "Organization",
      "name": "EUSIGNAL"
    },
    "datePublished": `${formattedDate}+${formattedTime}+02:00`,
    "dateModified": `${formattedDate}+${formattedTime}+02:00`,
    "inLanguage": "sl-SI"
  }
};

// Person Schema
const personSchema = {
  "@context": "https://schema.org",
  "@type": "Person",
  "name": authorProfileData.name,
  "url": Astro.url.href,
  "description": authorProfileData.description,
  "sameAs": [
    authorProfileData.socialLinks.website,
    authorProfileData.socialLinks.linkedin,
    authorProfileData.socialLinks.twitter,
    "https://www.instagram.com/eusignal",
    "https://www.youtube.com/@eusignal",
    "https://www.tiktok.com/@eusignal"
  ],
  "jobTitle": authorProfileData.jobTitle,
  "worksFor": {
    "@type": "Organization",
    "name": authorProfileData.company,
    "url": authorProfileData.socialLinks.website
  },
  "image": authorProfileData.image,
  "nationality": {
    "@type": "Country",
    "name": "Slovenia"
  },
  "knowsLanguage": languagesData.map(lang => ({
    "@type": "Language",
    "name": lang.name
  })),
  "disambiguatingDescription": authorProfileData.description
};

// Organization Schema
const organizationSchema = {
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "EUSIGNAL",
  "foundingDate": "2020",
  "logo": "/images/logo.png",
  "keywords": [
    "EUSIGNAL",
    authorProfileData.name,
    "Slovenia"
  ],
  "numberOfEmployees": {
    "@type": "QuantitativeValue",
    "minValue": "1",
    "maxValue": "9"
  },
  "slogan": "Premium varnostni znaki in opozorilni sistemi",
  "contactPoint": {
    "@type": "ContactPoint",
    "email": "info@eusignal.com",
    "contactType": "customer service"
  },
  "sameAs": [
    "https://www.instagram.com/eusignal",
    "https://www.facebook.com/eusignal",
    "https://twitter.com/eusignal",
    "https://www.linkedin.com/company/eusignal",
    "https://www.tiktok.com/@eusignal",
    "https://www.youtube.com/@eusignal",
    "https://www.pinterest.com/eusignal"
  ],
  "areaServed": {
    "@type": "Country",
    "name": "Slovenia",
    "identifier": "SI"
  }
};

// Combine all schemas
const schema = [webpageSchema, personSchema, organizationSchema];
---

<AuthorLayout
  name={authorProfileData.name}
  description={authorProfileData.description}
  image={authorProfileData.image}
  socialLinks={authorProfileData.socialLinks}
  jobTitle={authorProfileData.jobTitle}
  company={authorProfileData.company}
  languages={languagesData}
  layoutStrings={layoutStringsData}
  schema={schema}
/>
Title: @astrojs/sitemap

URL Source: https://docs.astro.build/en/guides/integrations-guide/sitemap/

Markdown Content:
This **[Astro integration](https://docs.astro.build/en/guides/integrations-guide/)** generates a sitemap based on your pages when you build your Astro project.

Why Astro Sitemap
-----------------

[Section titled Why Astro Sitemap](https://docs.astro.build/en/guides/integrations-guide/sitemap/#why-astro-sitemap)

A Sitemap is an XML file that outlines all of the pages, videos, and files on your site. Search engines like Google read this file to crawl your site more efficiently. [See Google’s own advice on sitemaps](https://developers.google.com/search/docs/advanced/sitemaps/overview) to learn more.

A sitemap file is recommended for large multi-page sites. If you don’t use a sitemap, most search engines will still be able to list your site’s pages, but a sitemap is a great way to ensure that your site is as search engine friendly as possible.

With Astro Sitemap, you don’t have to worry about creating this XML file yourself: the Astro Sitemap integration will crawl your statically-generated routes and create the sitemap file, including [dynamic routes](https://docs.astro.build/en/guides/routing/#dynamic-routes) like `[...slug]` or `src/pages/[lang]/[version]/info.astro` generated by `getStaticPaths()`.

This integration cannot generate sitemap entries for dynamic routes in [SSR mode](https://docs.astro.build/en/guides/on-demand-rendering/).

Astro includes an `astro add` command to automate the setup of official integrations. If you prefer, you can [install integrations manually](https://docs.astro.build/en/guides/integrations-guide/sitemap/#manual-install) instead.

Run one of the following commands in a new terminal window.

*   [npm](https://docs.astro.build/en/guides/integrations-guide/sitemap/#tab-panel-3599)
*   [pnpm](https://docs.astro.build/en/guides/integrations-guide/sitemap/#tab-panel-3600)
*   [Yarn](https://docs.astro.build/en/guides/integrations-guide/sitemap/#tab-panel-3601)

`npx astro add sitemap`

If you run into any issues, [feel free to report them to us on GitHub](https://github.com/withastro/astro/issues) and try the manual installation steps below.

First, install the `@astrojs/sitemap` package using your package manager.

*   [npm](https://docs.astro.build/en/guides/integrations-guide/sitemap/#tab-panel-3602)
*   [pnpm](https://docs.astro.build/en/guides/integrations-guide/sitemap/#tab-panel-3603)
*   [Yarn](https://docs.astro.build/en/guides/integrations-guide/sitemap/#tab-panel-3604)

`npm install @astrojs/sitemap`

Then, apply the integration to your `astro.config.*` file using the `integrations` property:

`import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';export default defineConfig({  // ...  integrations: [sitemap()],});`

`@astrojs/sitemap` needs to know your site’s deployed URL to generate a sitemap.

Add your site’s URL as the [`site`](https://docs.astro.build/en/reference/configuration-reference/#site) option in `astro.config.mjs`. This must begin with `http://` or `https://`.

`import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';export default defineConfig({  site: 'https://stargazers.club',  integrations: [sitemap()],  // ...});`

With the sitemap integration configured, `sitemap-index.xml` and `sitemap-0.xml` files will be added to your output directory when building your site.

`sitemap-index.xml` links to all the numbered sitemap files. `sitemap-0.xml` lists the pages on your site. For extremely large sites, there may also be additional numbered files like `sitemap-1.xml` and `sitemap-2.xml`.

Example of generated files for a two-page website

`<?xml version="1.0" encoding="UTF-8"?>  <sitemapindex xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">  <sitemap>    <loc>https://stargazers.club/sitemap-0.xml</loc>  </sitemap></sitemapindex>`

`<?xml version="1.0" encoding="UTF-8"?><urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:news="http://www.google.com/schemas/sitemap-news/0.9" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:image="http://www.google.com/schemas/sitemap-image/1.1" xmlns:video="http://www.google.com/schemas/sitemap-video/1.1">  <url>    <loc>https://stargazers.club/</loc>  </url>  <url>    <loc>https://stargazers.club/second-page/</loc>  </url></urlset>`

### Sitemap discovery

[Section titled Sitemap discovery](https://docs.astro.build/en/guides/integrations-guide/sitemap/#sitemap-discovery)

You can make it easier for crawlers to find your sitemap with links in your site’s `<head>` and `robots.txt` file.

#### Sitemap link in `<head>`

[Section titled Sitemap link in &lt;head&gt;](https://docs.astro.build/en/guides/integrations-guide/sitemap/#sitemap-link-in-head)

Add a `<link rel="sitemap">` element to your site’s `<head>` pointing to the sitemap index file:

`<head>  <link rel="sitemap" href="/sitemap-index.xml" /></head>`

#### Sitemap link in `robots.txt`

[Section titled Sitemap link in robots.txt](https://docs.astro.build/en/guides/integrations-guide/sitemap/#sitemap-link-in-robotstxt)

If you have a `robots.txt` for your website, you can add the URL for the sitemap index to help crawlers:

`User-agent: *Allow: /Sitemap: https://<YOUR SITE>/sitemap-index.xml`

If you want to reuse the `site` value from `astro.config.mjs`, you can also generate `robots.txt` dynamically. Instead of using a static file in the `public/` directory, create a `src/pages/robots.txt.ts` file and add the following code:

`import type { APIRoute } from 'astro';const getRobotsTxt = (sitemapURL: URL) => `User-agent: *Allow: /Sitemap: ${sitemapURL.href}`;export const GET: APIRoute = ({ site }) => {  const sitemapURL = new URL('sitemap-index.xml', site);  return new Response(getRobotsTxt(sitemapURL));};`

To configure this integration, pass an object to the `sitemap()` function in `astro.config.mjs`.

`import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';export default defineConfig({  integrations: [    sitemap({      // configuration options    }),  ],});`

All pages are included in your sitemap by default. By adding a custom `filter` function, you can filter included pages by URL.

`import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      filter: (page) => page !== 'https://stargazers.club/secret-vip-lounge/',    }),  ],});`

The function will be called for every page on your site. The `page` function parameter is the full URL of the page currently under consideration, including your `site` domain. Return `true` to include the page in your sitemap, and `false` to leave it out.

To filter multiple pages, add arguments with target URLs.

`import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      filter: (page) =>        page !== 'https://stargazers.club/secret-vip-lounge-1/' &&        page !== 'https://stargazers.club/secret-vip-lounge-2/' &&        page !== 'https://stargazers.club/secret-vip-lounge-3/' &&        page !== 'https://stargazers.club/secret-vip-lounge-4/',    }),  ],});`

In some cases, a page might be part of your deployed site but not part of your Astro project. If you’d like to include a page in your sitemap that _isn’t_ created by Astro, you can use this option.

`import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      customPages: ['https://stargazers.club/external-page', 'https://stargazers.club/external-page2'],    }),  ],});`

The maximum number entries per sitemap file. The default value is 45000. A sitemap index and multiple sitemaps are created if you have more entries. See this [explanation of splitting up a large sitemap](https://developers.google.com/search/docs/advanced/sitemaps/large-sitemaps).

`import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      entryLimit: 10000,    }),  ],});`

### changefreq, lastmod, and priority

[Section titled changefreq, lastmod, and priority](https://docs.astro.build/en/guides/integrations-guide/sitemap/#changefreq-lastmod-and-priority)

These options correspond to the `<changefreq>`, `<lastmod>`, and `<priority>` tags in the [Sitemap XML specification.](https://www.sitemaps.org/protocol.html)

Note that `changefreq` and `priority` are ignored by Google.

`import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      changefreq: 'weekly',      priority: 0.7,      lastmod: new Date('2022-02-24'),    }),  ],});`

A function called for each sitemap entry just before writing to a disk. This function can be asynchronous.

It receives as its parameter a `SitemapItem` object that can have these properties:

*   `url` (absolute page URL). This is the only property that is guaranteed to be on `SitemapItem`.
*   `changefreq`
*   `lastmod` (ISO formatted date, `String` type)
*   `priority`
*   `links`.

This `links` property contains a `LinkItem` list of alternate pages including a parent page.

The `LinkItem` type has two fields: `url` (the fully-qualified URL for the version of this page for the specified language) and `lang` (a supported language code targeted by this version of the page).

The `serialize` function should return `SitemapItem`, touched or not.

The example below shows the ability to add sitemap specific properties individually.

`import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      serialize(item) {        if (/exclude-from-sitemap/.test(item.url)) {          return undefined;        }        if (/your-special-page/.test(item.url)) {          item.changefreq = 'daily';          item.lastmod = new Date();          item.priority = 0.9;        }        return item;      },    }),  ],});`

To localize a sitemap, pass an object to this `i18n` option.

This object has two required properties:

*   `defaultLocale`: `String`. Its value must exist as one of `locales` keys.
*   `locales`: `Record<String, String>`, key/value - pairs. The key is used to look for a locale part in a page path. The value is a language attribute, only English alphabet and hyphen allowed.

[Read more about language attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/lang).

[Read more about localization](https://developers.google.com/search/docs/advanced/crawling/localized-versions#all-method-guidelines).

`import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      i18n: {        defaultLocale: 'en', // All urls that don't contain `es` or `fr` after `https://stargazers.club/` will be treated as default locale, i.e. `en`        locales: {          en: 'en-US', // The `defaultLocale` value must present in `locales` keys          es: 'es-ES',          fr: 'fr-CA',        },      },    }),  ],});`

The resulting sitemap looks like this:

`...  <url>    <loc>https://stargazers.club/</loc>    <xhtml:link rel="alternate" hreflang="en-US" href="https://stargazers.club/"/>    <xhtml:link rel="alternate" hreflang="es-ES" href="https://stargazers.club/es/"/>    <xhtml:link rel="alternate" hreflang="fr-CA" href="https://stargazers.club/fr/"/>  </url>  <url>    <loc>https://stargazers.club/es/</loc>    <xhtml:link rel="alternate" hreflang="en-US" href="https://stargazers.club/"/>    <xhtml:link rel="alternate" hreflang="es-ES" href="https://stargazers.club/es/"/>    <xhtml:link rel="alternate" hreflang="fr-CA" href="https://stargazers.club/fr/"/>  </url>  <url>    <loc>https://stargazers.club/fr/</loc>    <xhtml:link rel="alternate" hreflang="en-US" href="https://stargazers.club/"/>    <xhtml:link rel="alternate" hreflang="es-ES" href="https://stargazers.club/es/"/>    <xhtml:link rel="alternate" hreflang="fr-CA" href="https://stargazers.club/fr/"/>  </url>  <url>    <loc>https://stargazers.club/es/second-page/</loc>    <xhtml:link rel="alternate" hreflang="es-ES" href="https://stargazers.club/es/second-page/"/>    <xhtml:link rel="alternate" hreflang="fr-CA" href="https://stargazers.club/fr/second-page/"/>    <xhtml:link rel="alternate" hreflang="en-US" href="https://stargazers.club/second-page/"/>  </url>...`

The URL of an XSL stylesheet to style and prettify your sitemap.

The value set can be either a path relative to your configured `site` URL for a local stylesheet, or can be an absolute URL link to an external stylesheet.

`import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';export default defineConfig({  site: 'https://example.com',  integrations: [    sitemap({      xslURL: '/sitemap.xsl'    }),  ],});`

The name prefix string used when generating the sitemap XML files. The default value is `sitemap`.

This option may be useful when integrating an Astro site into a domain with preexisting sitemap files.

`import { defineConfig } from 'astro/config';import sitemap from '@astrojs/sitemap';export default defineConfig({  site: 'https://stargazers.club',  integrations: [    sitemap({      filenameBase: 'astronomy-sitemap'    }),  ],});`

The given configuration will generate sitemap files at `https://stargazers.club/astronomy-sitemap-0.xml` and `https://stargazers.club/astronomy-sitemap-index.xml`.

*   The official Astro website uses Astro Sitemap to generate [its sitemap](https://astro.build/sitemap-index.xml).
*   [Browse projects with Astro Sitemap on GitHub](https://github.com/search?q=%22%40astrojs%2Fsitemap%22+path%3Apackage.json&type=Code) for more examples!

More integrations
-----------------

### Front-end frameworks

*   ![Image 1](https://docs.astro.build/logos/alpine-js.svg)

### [@astrojs/alpinejs](https://docs.astro.build/en/guides/integrations-guide/alpinejs/)

*   ![Image 2](https://docs.astro.build/logos/preact.svg)

### [@astrojs/preact](https://docs.astro.build/en/guides/integrations-guide/preact/)

*   ![Image 3](https://docs.astro.build/logos/react.svg)

### [@astrojs/react](https://docs.astro.build/en/guides/integrations-guide/react/)

*   ![Image 4](https://docs.astro.build/logos/solid.svg)

### [@astrojs/solid⁠-⁠js](https://docs.astro.build/en/guides/integrations-guide/solid-js/)

*   ![Image 5](https://docs.astro.build/logos/svelte.svg)

### [@astrojs/svelte](https://docs.astro.build/en/guides/integrations-guide/svelte/)

*   ![Image 6](https://docs.astro.build/logos/vue.svg)

### [@astrojs/vue](https://docs.astro.build/en/guides/integrations-guide/vue/)

### Adapters

*   ![Image 7](https://docs.astro.build/logos/cloudflare-pages.svg)

### [@astrojs/cloudflare](https://docs.astro.build/en/guides/integrations-guide/cloudflare/)

*   ![Image 8](https://docs.astro.build/logos/netlify.svg)

### [@astrojs/netlify](https://docs.astro.build/en/guides/integrations-guide/netlify/)

*   ![Image 9](https://docs.astro.build/logos/node.svg)

### [@astrojs/node](https://docs.astro.build/en/guides/integrations-guide/node/)

*   ![Image 10](https://docs.astro.build/logos/vercel.svg)

### [@astrojs/vercel](https://docs.astro.build/en/guides/integrations-guide/vercel/)

### Other integrations

*   ![Image 11](https://docs.astro.build/logos/db.svg)

### [@astrojs/db](https://docs.astro.build/en/guides/integrations-guide/db/)

*   ![Image 12](https://docs.astro.build/logos/markdoc.svg)

### [@astrojs/markdoc](https://docs.astro.build/en/guides/integrations-guide/markdoc/)

*   ![Image 13](https://docs.astro.build/logos/mdx.svg)

### [@astrojs/mdx](https://docs.astro.build/en/guides/integrations-guide/mdx/)

*   ![Image 14](https://docs.astro.build/logos/partytown.svg)

### [@astrojs/partytown](https://docs.astro.build/en/guides/integrations-guide/partytown/)

*   ![Image 15](https://docs.astro.build/logos/sitemap.svg)

### [@astrojs/sitemap](https://docs.astro.build/en/guides/integrations-guide/sitemap/)